---
sidebar_position: 5
toc_max_heading_level: 6
slug: /queryorderpage
---

import RequestHeader from '../_request-header.mdx'
import ResponseHead from '../4_Refund/_response-head.mdx'
import AcquireOrderPayer from './_acquire-order-payer.mdx'

# Query Order Page

## Interface URL

- UAT: https://uat.test2pay.com/sgs/api/acquire2Query/queryOrderPage
- Production: https://api.payby.com/sgs/api/acquire2Query/queryOrderPage

## Request Parameters

### HTTP Header

| Variable Desc. | Variable name    | Required | Type       | Example value   | Description                                  |
| -------------- | ---------------- | -------- | ---------- | --------------- | -------------------------------------------- |
| Language       | Content-Language | Optional | String(10) | en              | Language preference: en - English (default)  |
| Signature      | sign             | Required | String     | IXJI/QicPQot... | Request signature for authentication         |
| Merchant ID    | Partner-Id       | Required | String(12) | 200000000888    | Unique merchant identifier assigned by Botim Money Business |

---

### HTTP Body

| Variable Desc.   | Variable name | Required | Type                             | Example value | Description                        |
| ---------------- | ------------- | -------- | -------------------------------- | ------------- | ---------------------------------- |
| Request time     | requestTime   | Required | TimeStamp(3)                     | 1581404947666 | Unix timestamp in milliseconds     |
| Business content | bizContent    | Required | QueryAcquire2OrderPageSgsRequest | -             | Contains the main query parameters |

---

**QueryAcquire2OrderPageSgsRequest**

| Variable Desc.       | Variable name     | Required | Type          | Example value                        | Description                                           |
| -------------------- | ----------------- | -------- | ------------- | ------------------------------------ | ----------------------------------------------------- |
| Start Date           | startDate         | Required | String(10)    | 2022-07-22                           | Query start date in YYYY-MM-DD format                 |
| End Date             | endDate           | Required | String(10)    | 2022-07-22                           | Query end date in YYYY-MM-DD format                   |
| Device ID List       | deviceIdList      | Optional | List(String)  | []                                   | Filter by specific device IDs (empty for all devices) |
| Include Status List  | includeStatusList | Optional | List(String)  | CREATED,PAID_SUCCESS,SETTLED,FAILURE | Filter by order status (empty for all statuses)       |
| Sort Page Parameters | sortPageParam     | Required | SortPageParam | -                                    | Pagination and sorting configuration                  |

---

**SortPageParam** 

| Variable Desc. | Variable name | Required | Type | Example value | Description                              |
| -------------- | ------------- | -------- | ---- | ------------- | ---------------------------------------- |
| Page Number    | number        | Optional | Int  | 0             | Page number starting from 0 (default: 0) |
| Page Size      | size          | Required | Int  | 20            | Number of records per page               |

---

## Request Sample

```json
// HTTP Header
{
    "Content-Language": "en",                    // Language preference
    "Content-Type": "application/json",          // Request content type
    "sign": "IXJI/QicPQotIsIDBcSGIg6jtJUXs1rTuifQFZUNd3KDTl25GKmpYO7OrkaKkTV0shDRitLmkxJCe3Z60zHE2ZSeVczrhwrnmuMG+bX9N22Hw821H6MydsXetYHRnyf5dPbgpmVja582w49grA6jRlVFAVMYdxKJDPSCb2X/IpltvyrLQ1Wt+lqr+fnpYXvyON6/PIZIQIknC8BVddVahxJnaC6HEagvJf6gskz22/DFfPHT1mlMA9pg8qrbh4O7DYZahf8TB3nIzAPc/FHOUZkYYTT2c8m4eLL8740nJVK7D3IOSqSnBAU/iJ2omjPPFvRCCSqzz17pkGsT7AW91w==",  // Request signature
    "Partner-Id": "200000000888"                // Merchant ID
}

// HTTP Body
{
    "requestTime": 1581404947666,               // Request timestamp
    "bizContent": {
        "startDate":"2022-07-22",               // Query from this date
        "endDate":"2022-07-22",                 // Query to this date
        "deviceIdList": [],                     // Empty array means all devices
        "includeStatusList":[],                 // Empty array means all statuses
        "sortPageParam": {
            "number": 0,                        // First page
            "size": 20                          // 20 records per page
        }
    }
}
```

## Response Parameters

The body in the HTTP Body are returned only when `applyStatus` is `SUCCESS` and `code` = `0`.

---

**HTTP Body**

| Variable Desc. | Variable name | Required | Type                                | Example value | Description                  |
| -------------- | ------------- | -------- | ----------------------------------- | ------------- | ---------------------------- |
| Response head  | head          | Required | ResponseHeader                      |               | Response status and metadata |
| Response body  | body          | Optional | Pagination(Acquire2OrderListResult) |               | Paginated order data         |

---

**Pagination**

| Variable Desc. | Variable name | Required | Type                          | Example value | Description                     |
| -------------- | ------------- | -------- | ----------------------------- | ------------- | ------------------------------- |
| Total Elements | totalElements | Required | Int                           | 6             | Total number of records found   |
| Total Pages    | totalPages    | Required | Int                           | 1             | Total number of pages available |
| Items          | items         | Required | List(Acquire2OrderListResult) |               | Array of order records          |

---

**Acquire2OrderListResult**

| Variable Desc.    | Variable name   | Required | Type         | Example value                        | Description                                         |
| ----------------- | --------------- | -------- | ------------ | ------------------------------------ | --------------------------------------------------- |
| Merchant Order No | merchantOrderNo | Required | String       | b7023000-fb84-4259-9870-8dff62c7299c | Merchant's unique order identifier                  |
| Order No          | orderNo         | Required | String       | 131658483622183687                   | Botim Money Business system order number                           |
| Device ID         | deviceId        | Required | String       | 20001019                             | Payment device identifier                           |
| Status            | status          | Required | String       | SETTLED                              | Order status (CREATED/PAID_SUCCESS/SETTLED/FAILURE) |
| Product           | product         | Required | String       | Basic Payment Gateway                | Payment product type                                |
| Total Amount      | totalAmount     | Required | Money        |                                      | Order total amount with currency                    |
| Payee Merchant ID | payeeMid        | Required | String       | 200000030906                         | Receiving merchant identifier                       |
| Expired Time      | expiredTime     | Required | Timestamp(3) | 1658487222029                        | Order expiration timestamp                          |
| Subject           | subject         | Optional | String       | Test                                 | Order description or subject                        |
| Request Time      | requestTime     | Required | Timestamp(3) | 1658519999999                        | Order creation timestamp                            |
| Pay Scene Code    | paySceneCode    | Required | String       | PAYPAGE                              | Payment scenario identifier                         |
| Payment Info      | paymentInfo     | Optional | PaymentInfo  |                                      | Payment details (present for completed orders)      |
| Notify URL        | notifyUrl       | Optional | String       |                                      | Callback URL for order notifications                |
| Revoked           | revoked         | Optional | String       |                                      | Indicates if order was revoked                      |
| Reserved          | reserved        | Optional | String       |                                      | Reserved field for future use                       |

---

**paymentInfo**

| Variable Desc.       | Variable name           | Required | Type         | Example value | Description                              |
| -------------------- | ----------------------- | -------- | ------------ | ------------- | ---------------------------------------- |
| Paid Time            | paidTime                | Required | Timestamp(3) | 1658484202235 | Timestamp when payment was completed     |
| Settled Time         | settledTime             | Required | Timestamp(3) | settledTime   | Timestamp when payment was settled       |
| Payer Merchant ID    | payerMid                | Required | String       | 100000047500  | Paying merchant identifier               |
| Paid Amount          | paidAmount              | Required | Money        |               | Actual amount paid                       |
| Payee Fee Amount     | payeeFeeAmount          | Required | Money        |               | Fee charged to payee                     |
| Payer Fee Amount     | payerFeeAmount          | Required | Money        |               | Fee charged to payer                     |
| Settlement Amount    | settlementAmount        | Required | Money        |               | Net amount settled to payee              |
| Payee Fee Before Tax | payeeFeeAmountBeforeTax | Required | Money        |               | Payee fee amount before tax              |
| Payee Fee VAT        | payeeFeeVat             | Required | Money        |               | VAT amount on payee fee                  |
| Pay Channel          | payChannel              | Required | String       | BALANCE       | Payment method used (BALANCE/CARD/etc.)  |
| Card Info            | cardInfo                | Optional | CardInfo     |               | Card details (present for card payments) |

---

**cardInfo**

| Variable Desc. | Variable name | Required | Type   | Example value | Description                         |
| -------------- | ------------- | -------- | ------ | ------------- | ----------------------------------- |
| Brand          | brand         | Required | String | MasterCard    | Card brand (Visa, MasterCard, etc.) |

---

## Response Sample

```json
// HTTP Body
{
    "head": {
        "applyStatus": "SUCCESS",               // Application processed successfully
        "code": "0",                            // Success response code
        "msg": "SUCCESS",                       // Success message
        "traceCode": "000000"                   // Trace code for debugging purposes
    },
    "body": {
        "totalElements": 6,                     // Total number of records found in query
        "totalPages": 1,                        // Total number of pages available
        "sortPageParam": {
            "number": 0,                        // Current page number (0-based)
            "size": 20                          // Records per page configuration
        },
        "items": [
            {
                "merchantOrderNo": "b7023000-fb84-4259-9870-8dff62c7299c",  // Unique merchant order identifier
                "orderNo": "131658483622183687",                            // Botim Money Business internal order number
                "deviceId": "20001019",                                     // Payment device ID
                "status": "SETTLED",                                        // Order has been settled successfully
                "paymentInfo": {
                    "paidTime": 1658484202235,                              // Unix timestamp when payment completed
                    "settledTime": 1658484202681,                           // Unix timestamp when payment settled
                    "payerMid": "100000047500",                             // Merchant ID of the payer
                    "paidAmount": {
                        "currency": "AED",                                  // Payment currency code
                        "amount": 2.25                                      // Amount paid by customer
                    },
                    "payeeFeeAmount": {
                        "currency": "AED",                                  // Fee currency
                        "amount": 0.06                                      // Transaction fee charged to payee
                    },
                    "payerFeeAmount": {
                        "currency": "AED",                                  // Payer fee currency
                        "amount": 0.0                                       // No fee charged to payer
                    },
                    "settlementAmount": {
                        "currency": "AED",                                  // Settlement currency
                        "amount": 2.19                                      // Net amount after deducting fees
                    },
                    "payeeFeeAmountBeforeTax": {
                        "currency": "AED",                                  // Pre-tax fee currency
                        "amount": 0.06                                      // Fee amount before tax calculation
                    },
                    "payeeFeeVat": {
                        "currency": "AED",                                  // VAT currency
                        "amount": 0.0                                       // No VAT applied to fee
                    },
                    "payChannel": "BALANCE"                                 // Payment made using account balance
                },
                "product": "Basic Payment Gateway",                         // Botim Money Business product type used
                "totalAmount": {
                    "amount": 2.25,                                         // Total order amount
                    "currency": "AED"                                       // Order currency
                },
                "payeeMid": "200000030906",                                 // Merchant ID receiving payment
                "expiredTime": 1658487222029,                               // Unix timestamp when order expires
                "subject": "test",                                          // Order description/subject
                "requestTime": 1658519999999,                               // Unix timestamp when order was created
                "paySceneCode": "PAYPAGE"                                   // Payment scenario code
            },
            {
                "merchantOrderNo": "991d90e1-a0c4-4460-bdac-db876eb6d78f",  // Second order example - created but unpaid
                "orderNo": "131658481358170925",
                "deviceId": "20001019",
                "status": "CREATED",                                        // Order created but payment not completed
                "product": "Basic Payment Gateway",
                "totalAmount": {
                    "amount": 2.25,
                    "currency": "AED"
                },
                "payeeMid": "200000030906",
                "expiredTime": 1658484958908,
                "subject": "test",
                "requestTime": 1658481358908,
                "paySceneCode": "PAYPAGE"
                // Note: No paymentInfo since order is not paid yet
            },
            {
                "merchantOrderNo": "c4ccbb32-6420-42ea-bc6c-14e8b3f39f33",  // Third order - also created but unpaid
                "orderNo": "131658480856167343",
                "deviceId": "20001019",
                "status": "CREATED",
                "product": "Basic Payment Gateway",
                "totalAmount": {
                    "amount": 2.25,
                    "currency": "AED"
                },
                "payeeMid": "200000030906",
                "expiredTime": 1658480977540,
                "subject": "test",
                "requestTime": 1658480856968,
                "paySceneCode": "PAYPAGE"
            },
            {
                "merchantOrderNo": "cc63d61e-8caf-436d-a3c6-314318c8c6ad",  // Fourth order - failed payment
                "orderNo": "131658479615162180",
                "deviceId": "20001019",
                "status": "FAILURE",                                        // Payment attempt failed
                "product": "Basic Payment Gateway",
                "totalAmount": {
                    "amount": 2.25,
                    "currency": "AED"
                },
                "payeeMid": "200000030906",
                "expiredTime": 1658479736247,
                "subject": "test",
                "requestTime": 1658479615457,
                "paySceneCode": "PAYPAGE"
            },
            {
                "merchantOrderNo": "39918222-77f8-4a86-a33f-94d3095dfae1",  // Fifth order - another failed payment
                "orderNo": "131658478925159905",
                "deviceId": "20001019",
                "status": "FAILURE",
                "product": "Basic Payment Gateway",
                "totalAmount": {
                    "amount": 2.25,
                    "currency": "AED"
                },
                "payeeMid": "200000030906",
                "expiredTime": 1658479046213,
                "subject": "test",
                "requestTime": 1658478925581,
                "paySceneCode": "PAYPAGE"
            },
            {
                "merchantOrderNo": "67a74918-95f4-4367-a265-c06b24bfd335",  // Sixth order - created status
                "orderNo": "131658478570157755",
                "deviceId": "20001019",
                "status": "CREATED",
                "product": "Basic Payment Gateway",
                "totalAmount": {
                    "amount": 2.25,
                    "currency": "AED"
                },
                "payeeMid": "200000030906",
                "expiredTime": 1658478690961,
                "subject": "test",
                "requestTime": 1658433600000,                               // Earlier request time than others
                "paySceneCode": "PAYPAGE"
            }
        ]
    }
}
```